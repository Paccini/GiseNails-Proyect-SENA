{% load static %}
<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
      {% block title %}
        Gise Nails
      {% endblock %}
    </title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" />
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" />
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Great+Vibes&family=Dancing+Script&display=swap" rel="stylesheet" />
    <!-- CSS personalizado -->
    <link rel="stylesheet" href="{% static 'css/base.css' %}" />
    <link rel="stylesheet" href="{% static 'css/navbar.css' %}" />
    <link rel="stylesheet" href="{% static 'css/footer.css' %}" />
    {% block extra_head %}
    {% endblock %}
  </head>
  <body>
    <!-- Nuevo Navbar Moderno -->
    <header class="gn-navbar" id="gnNavbar">
      <div class="brand" onclick="window.location.href='{% url 'inicio' %}'" role="button" aria-label="Gise Nails">
        <div class="title">
          <h1>GISE NAILS</h1>
          <small>Belleza y cuidado de tus uñas</small>
        </div>
      </div>

      <nav>
        {# Si tienes el context processor de request activo, usamos request.resolver_match.view_name para marcar el link activo #}
        {% if request.resolver_match %}
          {% with current_view=request.resolver_match.view_name %}
            <div class="nav-links" id="navLinks">
              <a class="underline {% if current_view == 'inicio' %}active{% endif %}" href="{% url 'inicio' %}"><i class="bi bi-house-door"></i> Inicio</a>
              <a class="underline {% if current_view == 'reserva:reserva' %}active{% endif %}" href="{% url 'reserva:reserva' %}"><i class="bi bi-calendar-check"></i> Reserva</a>
              <a class="underline {% if current_view == 'nosotros' %}active{% endif %}" href="{% url 'nosotros' %}"><i class="bi bi-people"></i> Nosotros</a>
              <a class="underline {% if current_view == 'productos:lista_productos' %}active{% endif %}" href="{% url 'productos:lista_productos' %}"><i class="bi bi-bag-heart"></i> Productos</a>
              <a class="underline {% if current_view == 'servicio:lista_servicios' %}active{% endif %}" href="{% url 'servicio:lista_servicios' %}"><i class="bi bi-star"></i> Servicios</a>
              <a class="underline {% if current_view == 'login:login' %}active{% endif %}" href="{% url 'login:login' %}"><i class="bi bi-person-circle"></i> Inicia sesión</a>
            </div>
          {% endwith %}
        {% else %}
          {# Fallback si request.resolver_match no está disponible: simple enlaces sin active dinámico #}
          <div class="nav-links" id="navLinks">
            <a class="underline" href="{% url 'inicio' %}"><i class="bi bi-house-door"></i> Inicio</a>
            <a class="underline" href="{% url 'reserva:reserva' %}"><i class="bi bi-calendar-check"></i> Reserva</a>
            <a class="underline" href="{% url 'nosotros' %}"><i class="bi bi-people"></i> Nosotros</a>
            <a class="underline" href="{% url 'productos:lista_productos' %}"><i class="bi bi-bag-heart"></i> Productos</a>
            <a class="underline" href="{% url 'servicio:lista_servicios' %}"><i class="bi bi-star"></i> Servicios</a>
            <a class="underline" href="{% url 'login:login' %}"><i class="bi bi-person-circle"></i> Inicia sesión</a>
          </div>
        {% endif %}

        <div class="actions">
          <button class="icon-btn mobile-toggle" id="mobileToggle" aria-expanded="false" aria-controls="mobileMenu"><i class="bi bi-list"></i></button>
        </div>

        <!-- Mobile menu (hidden on desktop) -->
        <div class="mobile-menu hidden" id="mobileMenu" role="menu" aria-hidden="true">
          <a href="{% url 'inicio' %}">Inicio</a>
          <a href="{% url 'reserva:reserva' %}">Reserva</a>
          <a href="{% url 'nosotros' %}">Nosotros</a>
          <a href="{% url 'productos:lista_productos' %}">Productos</a>
          <a href="{% url 'servicio:lista_servicios' %}">Servicios</a>
          <a href="{% url 'login:login' %}">Inicia sesión</a>
        </div>
      </nav>
    </header>
    <div style="height: 80px;"></div>

    <!-- Contenido principal -->
    <main class="main-content">
      <div class="container-fluid">
        {% block content %}
        {% endblock %}
      </div>
    </main>

    <hr style="border-top: 3px solid #fff; margin: 0 40px;" />
    <hr />

    <!-- Pie de página -->
    <footer class="mt-auto pie">
      <div class="footer-section-top py-4">
        <div class="container">
          <div class="row pierna">
            <div class="col-md-4 footer-column">
              <h5>¡Tu opinión es muy importante, déjanos tu comentario!</h5>
              <ul class="list-unstyled">
                <li>
                  <a href="mailto:giselav489@gmail.com"><i class="bi bi-envelope-at"></i> giselav489@gmail.com</a>
                </li>
                <li>
                  <a href="https://wa.me/3153923380"><i class="bi bi-telephone"></i> +57 315-392-3380</a>
                </li>
              </ul>
            </div>
            <div class="col-md-4 footer-column separador">
              <h5>Nuestros servicios</h5>
              <div class="row">
                <div class="col-6">
                  <ul class="list-unstyled text-start">
                    <li>
                      <a href="#"><i class="bi bi-suit-heart-fill"></i> Manicure tradicional</a>
                    </li>
                    <li>
                      <a href="#"><i class="bi bi-suit-heart-fill"></i> Manicure Semipermanente</a>
                    </li>
                    <li>
                      <a href="#"><i class="bi bi-suit-heart-fill"></i> Dipping</a>
                    </li>
                    <li>
                      <a href="#"><i class="bi bi-suit-heart-fill"></i> Biulder gel</a>
                    </li>
                    <li>
                      <a href="#"><i class="bi bi-suit-heart-fill"></i> Press on</a>
                    </li>
                  </ul>
                </div>
                <div class="col-6">
                  <ul class="list-unstyled text-start">
                    <li>
                      <a href="#"><i class="bi bi-suit-heart-fill"></i> Poligel</a>
                    </li>
                    <li>
                      <a href="#"><i class="bi bi-suit-heart-fill"></i> Pedicure tradicional</a>
                    </li>
                    <li>
                      <a href="#"><i class="bi bi-suit-heart-fill"></i> Pedicure Semipermanente</a>
                    </li>
                    <li>
                      <a href="#"><i class="bi bi-suit-heart-fill"></i> Estructura de uña en pie</a>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
            <div class="col-md-4 footer-column icono_social">
              <h5>Síguenos en nuestras redes</h5>
              <ul class="list-inline social-icons-list justify-content-center">
                <li class="list-inline-item">
                  <a href="https://www.facebook.com/share/18rBpCmAT6/" class="social-icon-link" aria-label="Facebook"><i class="bi bi-facebook"></i></a>
                </li>
                <li class="list-inline-item">
                  <a href="https://www.instagram.com/gise_nails07?igsh=MTZvc3J5d3J3MnY1Yw==" class="social-icon-link" aria-label="Instagram"><i class="bi bi-instagram"></i></a>
                </li>
                <li class="list-inline-item">
                  <a href="#" class="social-icon-link" aria-label="TikTok"><i class="bi bi-tiktok"></i></a>
                </li>
                <li class="list-inline-item">
                  <a href="https://wa.me/3002040538" class="social-icon-link" aria-label="WhatsApp"><i class="bi bi-whatsapp"></i></a>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
      <div class="footer-section-bottom py-3 text-center pie-2">
        <div class="container">
          <div class="footer-logo">
            <img src="{% static 'img/Logo gisel-nails.png' %}" alt="Gise Nails Logo" />
          </div>
          <div class="footer-brand-name mt-2">GISE NAILS</div>
          <div class="footer-copyright">Copyright © 2025. Todos los derechos reservados. Ibagué - Colombia</div>
        </div>
      </div>
    </footer>
    {% block scripts %}
    <!-- JQuery (necesario para main.js) -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <!-- JS personalizado -->
    <script src="{% static 'js/home.js' %}"></script>
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>

    {% block extra_js %}
      <script>
        ;(function () {
          const btn = document.getElementById('mobileToggle')
          const menu = document.getElementById('mobileMenu')
          btn &&
            btn.addEventListener('click', function (e) {
              const open = !menu.classList.contains('hidden')
              if (open) {
                menu.classList.add('hidden')
                btn.setAttribute('aria-expanded', 'false')
                menu.setAttribute('aria-hidden', 'true')
              } else {
                menu.classList.remove('hidden')
                btn.setAttribute('aria-expanded', 'true')
                menu.setAttribute('aria-hidden', 'false')
              }
            })
          document.addEventListener('click', function (e) {
            if (!menu || !btn) return
            if (!menu.classList.contains('hidden') && !menu.contains(e.target) && !btn.contains(e.target)) {
              menu.classList.add('hidden')
              btn.setAttribute('aria-expanded', 'false')
              menu.setAttribute('aria-hidden', 'true')
            }
          })
          const navbar = document.getElementById('gnNavbar')
          window.addEventListener('scroll', function () {
            if (window.scrollY > 20) navbar.classList.add('scrolled')
            else navbar.classList.remove('scrolled')
          })
        })()
      </script>
    {% endblock %}
  </body>
</html>
