{% extends 'home.html' %}

{% block title %}
  Gise Nails
{% endblock %}

{% block content %}
  {% load static %}

  <link rel="stylesheet" href="{% static 'css/card_moderno.css' %}" />

  <style>
    .scroll-fade {
      opacity: 0;
      transform: translateY(30px);
      transition: opacity 0.6s ease, transform 0.6s cubic-bezier(0.2, 0.8, 0.2, 1);
      will-change: opacity, transform;
    }
    .scroll-fade.visible {
      opacity: 1;
      transform: none;
    }
  </style>

  <div class="scroll-fade" data-delay="0.02">
    <h1 class="text-center fw-bold mb-4" style="color:#ff4081;font-size:2.5em;font-family: 'Comic Sans MS', cursive;">¡CONOCE TODOS NUESTROS PRODUCTOS!</h1>

    <p class="text-center fs-5 mb-4">Descubre nuestra variedad de productos para el cuidado de uñas y belleza, seleccionados para ti con la mejor calidad y seguridad.</p>

    <div class="cards">
      {% for producto in productos %}
        <div class="card-gn scroll-fade" data-delay="{{ forloop.counter0|floatformat:2|add:'0.03' }}">
          {% if producto.imagen %}
            <img src="{{ producto.imagen.url }}" alt="{{ producto.nombre }}" />
          {% endif %}
          <span class="card-title">{{ producto.nombre }}</span>
          <div class="card-text mb-2">{{ producto.descripcion }}</div>
          <span class="badge">${{ producto.precio }}</span>
        </div>
      {% endfor %}
    </div>

    <div class="d-flex justify-content-center mt-4">
      <nav aria-label="Page navigation">
        <ul class="pagination">
          {% if productos.has_previous %}
            <li class="page-item">
              <a class="page-link" href="?page={{ productos.previous_page_number }}" aria-label="Anterior"><span aria-hidden="true">&laquo;</span></a>
            </li>
          {% else %}
            <li class="page-item disabled">
              <span class="page-link">&laquo;</span>
            </li>
          {% endif %}
          {% for num in productos.paginator.page_range %}
            {% if productos.number == num %}
              <li class="page-item active">
                <span class="page-link">{{ num }}</span>
              </li>
            {% else %}
              <li class="page-item">
                <a class="page-link" href="?page={{ num }}">{{ num }}</a>
              </li>
            {% endif %}
          {% endfor %}
          {% if productos.has_next %}
            <li class="page-item">
              <a class="page-link" href="?page={{ productos.next_page_number }}" aria-label="Siguiente"><span aria-hidden="true">&raquo;</span></a>
            </li>
          {% else %}
            <li class="page-item disabled">
              <span class="page-link">&raquo;</span>
            </li>
          {% endif %}
        </ul>
      </nav>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const observer = new IntersectionObserver(
        (entries, obs) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              const el = entry.target
              const delay = parseFloat(el.getAttribute('data-delay') || 0)
              if (delay > 0) {
                setTimeout(() => el.classList.add('visible'), Math.round(delay * 1000))
              } else {
                el.classList.add('visible')
              }
              obs.unobserve(el)
            }
          })
        },
        { threshold: 0.15 }
      )
    
      document.querySelectorAll('.scroll-fade').forEach((el) => observer.observe(el))
    })
  </script>
{% endblock %}
