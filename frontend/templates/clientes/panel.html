<!-- filepath: c:\Users\juanv\Desktop\Juan-Django\templates\clientes\panel.html -->
{% extends 'base_usuario.html' %}
{% block content %}
<div class="usuario-topbar">
    <span>Panel de Cliente</span>
    <span class="usuario-nombre">{{ user.get_full_name|default:user.username }}</span>
    <form action="{% url 'logout' %}" method="post" style="display:inline;">
        {% csrf_token %}
        <button type="submit" class="usuario-btn-cerrar">
            <i class="bi bi-box-arrow-right"></i> Cerrar sesión
        </button>
    </form>
</div>
<div class="usuario-card">
    <h2><i class="bi bi-calendar-heart"></i> Mis Citas</h2>
    {% if citas %}
    <table class="table usuario-table">
        <thead>
            <tr>
                <th><i class="bi bi-calendar-event"></i> Fecha</th>
                <th><i class="bi bi-brush"></i> Servicio</th>
                <th><i class="bi bi-person-badge"></i> Gestora</th>
                <th><i class="bi bi-gear"></i> Acciones</th>
            </tr>
        </thead>
        <tbody>
        {% for cita in citas %}
            <tr>
                <td>{{ cita.fecha }} {{ cita.hora }}</td>
                <td>{{ cita.servicio }}</td>
                <td>{{ cita.gestora }}</td>
                <td>
                    <a href="{% url 'clientes:cancelar' cita.pk %}" class="btn btn-danger btn-sm">
                        <i class="bi bi-x-circle"></i> Cancelar
                    </a>
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p style="color:#c06caa;text-align:center;">No tienes citas asignadas.</p>
    {% endif %}
</div>
<div class="usuario-card">
    <h2>Bienvenido, {{ cliente.nombre }}</h2>
    <p><strong>Correo:</strong> {{ cliente.correo }}</p>
    <p><strong>Teléfono:</strong> {{ cliente.telefono }}</p>
    <p><strong>Fecha de registro:</strong> {{ cliente.fecha_registro|date:"d/m/Y H:i" }}</p>
</div>
{% endblock %}