{% extends 'base_usuario.html' %}
{% block content %}
<div class="usuario-topbar">
    <span class="usuario-nombre">
        Bienvenido, {{ cliente.nombre }} <span style="font-size:1.2em;">üå∏</span>
    </span>
    <form action="{% url 'logout' %}" method="post" style="display:inline;">
        {% csrf_token %}
        <button type="submit" class="usuario-btn-cerrar">
            <i class="bi bi-box-arrow-right"></i> Cerrar sesi√≥n
        </button>
    </form>
</div>

<div id="citas" class="usuario-card" style="margin-top:0;">
    <h2><i class="bi bi-calendar-heart"></i> Pr√≥ximas citas</h2>
    {% if citas %}
        {% for cita in citas %}
        <div style="border:1px solid #f3c6e3; border-radius:12px; margin-bottom:18px; padding:18px 16px; background:#faf6fb;">
            <div style="font-size:1.15em; color:#c06caa;">
                <i class="bi bi-calendar-event"></i>
                {{ cita.fecha }} - {{ cita.hora }}
            </div>
            <div style="margin-left:24px; color:#6c3483;">
                <strong>Servicio:</strong> {{ cita.servicio }}<br>
                <strong>Profesional:</strong> {{ cita.gestora }}
            </div>
            <div style="margin-top:8px; text-align:right;">
                <a href="{% url 'clientes:cancelar' cita.pk %}" class="btn btn-danger btn-sm">
                    <i class="bi bi-x-circle"></i> Cancelar
                </a>
            </div>
        </div>
        {% endfor %}
    {% else %}
        <p style="color:#c06caa;text-align:center;">No tienes citas asignadas.</p>
    {% endif %}
</div>

<div id="perfil" class="usuario-card" style="display:none;">
    <h2><i class="bi bi-person-circle"></i> Informaci√≥n personal</h2>
    <div style="color:#6c3483; font-size:1.08em;">
        <strong>Nombre:</strong> {{ cliente.nombre }}<br>
        <strong>Tel√©fono:</strong> {{ cliente.telefono }}<br>
        <strong>Correo:</strong> {{ cliente.correo }}<br>
        <strong>Fecha de registro:</strong> {{ cliente.fecha_registro|date:"d/m/Y H:i" }}
    </div>
    <div style="margin-top:24px; text-align:center;">
        <a href="#" class="btn btn-primary" style="margin:8px 12px; background:#c06caa; border:none;">
            <i class="bi bi-calendar-plus"></i> Agendar nueva cita
        </a>
        <a href="#" class="btn btn-outline-secondary" style="margin:8px 12px; color:#c06caa; border-color:#c06caa;">
            <i class="bi bi-pencil-square"></i> Editar perfil
        </a>
    </div>
</div>
{% endblock %}